/*
**
**  jquery.kyco.easyshare
**  =====================
**
**  Version 1.3.3
**
**  Brought to you by
**  https://www.kycosoftware.com
**
**  Copyright 2015 Cornelius Weidmann
**
**  Distributed under the GPL
**
*/

var kyco=kyco||{};kyco.API_PATH="../api/easyshare.php";
kyco.easyShare=function(){var a=[];0<$("[data-easyshare]").length&&$("[data-easyshare]").each(function(b){a[b]={};a[b].self=$(this);a[b].url=a[b].self.data("easyshare-url");a[b].countTotal=a[b].self.find("[data-easyshare-total-count]");a[b].countFacebook=a[b].self.find('[data-easyshare-button-count="facebook"]');a[b].countGoogle=a[b].self.find('[data-easyshare-button-count="google"]');a[b].countLinkedin=a[b].self.find('[data-easyshare-button-count="linkedin"]');a[b].countPinterest=a[b].self.find('[data-easyshare-button-count="pinterest"]');a[b].countXing=a[b].self.find('[data-easyshare-button-count="xing"]');a[b].loader=a[b].self.find("[data-easyshare-loader]");a[b].FORCE_HTTP="undefined"!==typeof a[b].self.data("easyshare-http");a[b].FORCE_HTTPS="undefined"!==typeof a[b].self.data("easyshare-https");a[b].SHARE_URL="undefined"===typeof a[b].url||""===a[b].url?window.location.href:a[b].url;$.ajax({url:kyco.API_PATH,type:"GET",dataType:"json",data:{url:a[b].SHARE_URL,http:a[b].FORCE_HTTP,https:a[b].FORCE_HTTPS,counts:{facebook:a[b].countFacebook.length,google:a[b].countGoogle.length,linkedin:a[b].countLinkedin.length,pinterest:a[b].countPinterest.length,xing:a[b].countXing.length}},success:function(c){a[b].countTotal.html(kyco.easyShareApproximate(c.Total));a[b].countFacebook.html(kyco.easyShareApproximate(c.Facebook));a[b].countGoogle.html(kyco.easyShareApproximate(c.Google));a[b].countLinkedin.html(kyco.easyShareApproximate(c.Linkedin));a[b].countPinterest.html(kyco.easyShareApproximate(c.Pinterest));a[b].countXing.html(kyco.easyShareApproximate(c.Xing))},error:function(){a[b].countTotal.html(0);a[b].countFacebook.html(0);a[b].countGoogle.html(0);a[b].countLinkedin.html(0);a[b].countPinterest.html(0);a[b].countXing.html(0)},complete:function(){a[b].loader.fadeOut(500)}});a[b].self.find('[data-easyshare-button="facebook"]').click(function(){var c=($(window).width()-500)/2,d=($(window).height()-400)/2;window.open("https://www.facebook.com/sharer/sharer.php?u="+a[b].SHARE_URL,"facebook","width=500,height=400,top="+d+",left="+c)});a[b].self.find('[data-easyshare-button="twitter"]').click(function(){var a=$(this).data("easyshare-tweet-text")||"",b=($(window).width()-575)/2,e=($(window).height()-440)/2,a="https://twitter.com/share?text="+encodeURIComponent(a);window.open(a,"twitter","status=1,width=575,height=440,top="+e+",left="+b)});a[b].self.find('[data-easyshare-button="google"]').click(function(){var c=($(window).width()-500)/2,d=($(window).height()-400)/2;window.open("https://plus.google.com/share?url="+a[b].SHARE_URL,"google+","width=500,height=400,top="+d+",left="+c)});a[b].self.find('[data-easyshare-button="linkedin"]').click(function(){var c=($(window).width()-500)/2,d=($(window).height()-400)/2;window.open("https://www.linkedin.com/cws/share?url="+a[b].SHARE_URL,"linkedin","width=500,height=400,top="+d+",left="+c)});a[b].self.find('[data-easyshare-button="pinterest"]').click(function(){var c=($(window).width()-500)/2,d=($(window).height()-400)/2;window.open("https://www.pinterest.com/pin/create/button/?url="+a[b].SHARE_URL,"pinterest","width=500,height=400,top="+d+",left="+c)});a[b].self.find('[data-easyshare-button="xing"]').click(function(){var c=($(window).width()-500)/2,d=($(window).height()-400)/2;window.open("https://www.xing.com/spi/shares/new?url="+a[b].SHARE_URL,"xing","width=500,height=400,top="+d+",left="+c)})})};kyco.easyShareAddCommas=function(a){var b=[],c=Math.round(a).toString().split("");if(1E3>a)return a.toString();c.reverse().forEach(function(a,c){c&&0===c%3&&b.push(",");b.push(a)});return b.reverse().join("")};kyco.easyShareFormatDecimals=function(a,b){var c=a/b;return 10>c?Math.round(10*c)/10:Math.round(c)};kyco.easyShareApproximate=function(a){var b=0>a,c=a;b&&(c=Math.abs(a));a=1E4>c?kyco.easyShareAddCommas(c):1E6>c?kyco.easyShareFormatDecimals(c,1E3)+"k":1E9>c?kyco.easyShareFormatDecimals(c,1E6)+"m":kyco.easyShareAddCommas(kyco.easyShareFormatDecimals(c,1E9))+"b";b&&(a="-"+a);return a};$(document).ready(function(){kyco.easyShare()});
